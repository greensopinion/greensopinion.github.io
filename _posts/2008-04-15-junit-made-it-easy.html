---
layout: post
title: JUnit Made It Easy!
date: '2008-04-15T06:53:00.000-07:00'
author: David Green
tags:
modified_time: '2008-04-15T06:54:14.512-07:00'
blogger_id: tag:blogger.com,1999:blog-1482979278030787271.post-6476212160691802188
original_url: http://greensopinion.blogspot.com/2008/04/junit-made-it-easy.html
comments: true
---

<span class="Apple-style-span" style="font-family: Times; "><div style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 3px; padding-right: 3px; padding-bottom: 3px; padding-left: 3px; width: auto; font: normal normal normal 100%/normal Georgia, serif; text-align: left; ">Recently I posted about <a href="http://greensopinion.blogspot.com/2008/04/evolving-wiki-markup-parser.html">evolving the architecture of a markup parser</a>.  During its evolution I ended up completely rewriting the parser to a new architecture.  A solid <a href="http://www.junit.org/">JUnit</a> test suite made it possible to do this while maintaining confidence in the quality of the new code.  This article details the nature of JUnits that make such a switch easy.<div><br /></div><div><b>Methodology:</b></div><div><br /></div><div>While developing the <a href="https://textile-j.dev.java.net/">Textile-J</a> markup parser I incrementally improved the parser by adding support for markup syntax.  Paragraphs were added first, then bold text, then lists, you get the idea.  As support was added for each syntax feature, I created one or more JUnit tests to exercise the feature.  I inspected the results of the HTML output from the small snippet of Textile used, and when I was satisfied created one or more assertions in the JUnit.  This made development easy because:</div><div><ul><li>I could isolate the syntax that I wanted to support and test it independently of other syntax</li><li>Since the tests were small, stepping through the code in the debugger only involved the relevant code</li><li>It's easy to see when something breaks that worked before</li><li>I could be confident in the quality of the parser</li></ul><div><b>The Result</b></div><div><b><br /></b></div><div>The result of using this methodology was a JUnit test suite of over 100 tests, and I could easily measure progress in supporting Textile markup features.</div><div><br /></div><div><b>Markup Parser Rewrite</b></div><div><b><br /></b></div><div>Rewriting the parser first involved stubbing out the new parser API, and then making the old parser API a facade to the new one.  In doing this my new parser API automatically gained over 100 JUnit tests -- which of course were now failing.  By incrementally improving the new parser until all JUnits passed, I could be certain that the new parser supports the same markup language features.</div><div><br /></div><div>As I finished the last language feature and saw green for every JUnit test, I had a huge sense of relief.  I now knew that the new parser was working with a guaranteed level of quality.</div><div><br /></div><div>The Textile-J project now has over 250 JUnit tests.  To get an idea what feedback JUnit can give, take a look at the <a href="https://textile-j.dev.java.net/builds/net.java.textilej/2.1.375/junit/junit-noframes.html">test report here</a>, and the <a href="https://textile-j.dev.java.net/builds/net.java.textilej/2.1.375/coverage/frame-summary.html">code coverage report here</a>.</div><div><br /></div><div><b>Attributes of a Test Oriented Project</b></div><div><b><br /></b></div><div>The following are some attributes of my project that make JUnit tests so powerful:</div><div><ul><li>A JUnit test for every feature</li><li>Meaningful assertions</li><li>An environment that makes running JUnits painless and easy (like <a href="http://www.eclipse.org/">Eclipse</a>)</li><li>A development methodology that encourages or requires tests for all new code</li><li>An Ant build script that runs the JUnits whenever a new build is created</li><li>Integrated code coverage (such as <a href="http://cobertura.sourceforge.net/">cobertura</a>) so that you can see which code is tested</li></ul><div>Once your project is set up to run tests, it's easy to add them... so jump that first hurdle and get testing with JUnit!</div></div></div></div></span>
